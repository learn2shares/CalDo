(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{2155:function(e,t,a){Promise.resolve().then(a.bind(a,413))},413:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var r=a(3827),s=a(4090),n=a(3121),i=a(2328),d=a(1754),l=a(6173);function u(){let[e,t]=(0,s.useState)(new Date),{tasks:a}=(0,n.X)(),u=function(e,t){var a;let r=(0,i.Q)(e.start),s=(0,i.Q)(e.end),n=+r>+s,d=n?+r:+s,l=n?s:r;l.setHours(0,0,0,0);let u=null!==(a=null==t?void 0:t.step)&&void 0!==a?a:1;if(!u)return[];u<0&&(u=-u,n=!n);let c=[];for(;+l<=d;)c.push((0,i.Q)(l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return n?c.reverse():c}({start:function(e){let t=(0,i.Q)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e),end:function(e){let t=(0,i.Q)(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}(e)}),c=a.reduce((e,t)=>{let a=new Date(t.due_date).toDateString();return e[a]||(e[a]=[]),e[a].push(t),e},{});return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Calendar View"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>{t(new Date(e.getFullYear(),e.getMonth()-1))},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:(0,r.jsx)(l.YFh,{className:"w-5 h-5"})}),(0,r.jsx)("span",{className:"text-lg font-medium",children:(0,d.WU)(e,"MMMM yyyy")}),(0,r.jsx)("button",{onClick:()=>{t(new Date(e.getFullYear(),e.getMonth()+1))},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:(0,r.jsx)(l.Tfp,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 text-center font-medium",children:e},e)),u.map((e,t)=>{let a=c[e.toDateString()]||[];return(0,r.jsxs)("div",{className:"min-h-[120px] bg-white dark:bg-gray-800 p-2",children:[(0,r.jsx)("div",{className:"text-sm mb-1 text-gray-500",children:(0,d.WU)(e,"d")}),(0,r.jsx)("div",{className:"space-y-1",children:a.map(e=>(0,r.jsx)("div",{className:"text-xs p-1 rounded ".concat(e.completed?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200":"high"===e.priority?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200"),children:e.title},e.id))})]},e.toISOString())})]})]})}},3121:function(e,t,a){"use strict";a.d(t,{X:function(){return i}});var r=a(4090),s=a(4599);let n={async createTask(e){let{data:{user:t}}=await s.O.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:r}=await s.O.from("tasks").insert([{...e,user_id:t.id}]).select().single();if(r)throw r;return a},async getTasks(){let{data:{user:e}}=await s.O.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:a}=await s.O.from("tasks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;return t},async updateTask(e,t){let{data:{user:a}}=await s.O.auth.getUser();if(!a)throw Error("User not authenticated");let{data:r,error:n}=await s.O.from("tasks").update(t).eq("id",e).eq("user_id",a.id).select().single();if(n)throw n;return r},async deleteTask(e){let{data:{user:t}}=await s.O.auth.getUser();if(!t)throw Error("User not authenticated");let{error:a}=await s.O.from("tasks").delete().eq("id",e).eq("user_id",t.id);if(a)throw a;return!0},async toggleTaskComplete(e,t){return this.updateTask(e,{completed:t})},async getTasksByCategory(e){let{data:{user:t}}=await s.O.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:r}=await s.O.from("tasks").select("*").eq("category",e).eq("user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return a},async getTasksByDateRange(e,t){let{data:{user:a}}=await s.O.auth.getUser();if(!a)throw Error("User not authenticated");let{data:r,error:n}=await s.O.from("tasks").select("*").eq("user_id",a.id).gte("due_date",e).lte("due_date",t).order("due_date",{ascending:!0});if(n)throw n;return r}};function i(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=await n.getTasks();t(e),d(null)}catch(e){d(e instanceof Error?e.message:"Failed to fetch tasks")}finally{s(!1)}},u=async a=>{try{let r=await n.createTask(a);return t([r,...e]),r}catch(e){return d(e instanceof Error?e.message:"Failed to add task"),null}},c=async(a,r)=>{try{let s=await n.updateTask(a,r);return t(e.map(e=>e.id===a?s:e)),s}catch(e){return d(e instanceof Error?e.message:"Failed to update task"),null}},o=async a=>{try{return await n.deleteTask(a),t(e.filter(e=>e.id!==a)),!0}catch(e){return d(e instanceof Error?e.message:"Failed to delete task"),!1}},g=async t=>{let a=e.find(e=>e.id===t);return a?c(t,{completed:!a.completed}):null};return{tasks:e,loading:a,error:i,addTask:u,updateTask:c,deleteTask:o,toggleTaskComplete:g,refreshTasks:l}}},4599:function(e,t,a){"use strict";a.d(t,{O:function(){return i}});var r=a(663);let s="https://tffnlgnvmhzxidalqwwv.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZm5sZ252bWh6eGlkYWxxd3d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4NjQzNDcsImV4cCI6MjA1OTQ0MDM0N30.NAZJrpufIbmRcCKa_TW95uOikJHzbNhBFH_cA1SwjD8";if(!s||!n)throw Error("Missing Supabase environment variables");let i=(0,r.AY)(s,n)}},function(e){e.O(0,[956,663,805,971,69,744],function(){return e(e.s=2155)}),_N_E=e.O()}]);