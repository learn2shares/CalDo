(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1379:function(e,t,r){Promise.resolve().then(r.bind(r,3740))},3740:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var a=r(3827),s=r(4090),i=r(3121),n=r(1754),d=r(6173);function l(){let{tasks:e,loading:t,error:r,addTask:l,updateTask:o,deleteTask:c,toggleTaskComplete:u}=(0,i.X)(),[g,h]=(0,s.useState)({title:"",description:"",due_date:new Date().toISOString(),priority:"medium",category:"Personal"}),y=async e=>{e.preventDefault(),g.title&&(await l({title:g.title,description:g.description||"",due_date:g.due_date||new Date().toISOString(),priority:g.priority||"medium",category:g.category||"Personal",completed:!1}),h({title:"",description:"",due_date:new Date().toISOString(),priority:"medium",category:"Personal"}))};return t?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,a.jsx)("div",{className:"text-error bg-error/10 px-4 py-2 rounded-md",children:r})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Add New Task"}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"Task title",value:g.title,onChange:e=>h({...g,title:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent transition-colors"})}),(0,a.jsx)("div",{children:(0,a.jsx)("textarea",{placeholder:"Description (optional)",value:g.description||"",onChange:e=>h({...g,description:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary focus:border-transparent transition-colors min-h-[100px]"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",value:(0,n.WU)(new Date(g.due_date||new Date),"yyyy-MM-dd"),onChange:e=>h({...g,due_date:new Date(e.target.value).toISOString()}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent transition-colors"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:g.priority,onChange:e=>h({...g,priority:e.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent transition-colors",children:[(0,a.jsx)("option",{value:"low",children:"Low Priority"}),(0,a.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,a.jsx)("option",{value:"high",children:"High Priority"})]})})]}),(0,a.jsx)("button",{type:"submit",className:"w-full px-6 py-3 rounded-lg bg-primary text-white font-medium hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors",children:"Add Task"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transition-all ".concat(e.completed?"opacity-75":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("button",{onClick:()=>u(e.id),className:"mt-1 p-2 rounded-full transition-colors ".concat(e.completed?"text-green-500 bg-green-50 dark:bg-green-900/20":"text-gray-400 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20"),children:(0,a.jsx)(d.UgA,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-medium truncate ".concat(e.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"),children:e.title}),e.description&&(0,a.jsx)("p",{className:"mt-1 text-gray-600 dark:text-gray-300 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-3 text-sm",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:[(0,a.jsx)(d.vlc,{className:"w-4 h-4"}),(0,n.WU)(new Date(e.due_date),"MMM d, yyyy")]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full ".concat("high"===e.priority?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300":"medium"===e.priority?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300":"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300"),children:[(0,a.jsx)(d.MJI,{className:"w-4 h-4"}),e.priority.charAt(0).toUpperCase()+e.priority.slice(1)]})]})]}),(0,a.jsx)("button",{onClick:()=>c(e.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors",children:(0,a.jsx)(d.Ybf,{className:"w-5 h-5"})})]})},e.id)),0===e.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks yet. Add your first task above!"})})]})]})}function o(){return(0,a.jsx)("main",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-gray-900 dark:text-white mb-4 font-sans",children:"CalDo"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Simple and effective task management"})]}),(0,a.jsx)(l,{})]})})}},3121:function(e,t,r){"use strict";r.d(t,{X:function(){return n}});var a=r(4090),s=r(4599);let i={async createTask(e){let{data:{user:t}}=await s.O.auth.getUser();if(!t)throw Error("User not authenticated");let{data:r,error:a}=await s.O.from("tasks").insert([{...e,user_id:t.id}]).select().single();if(a)throw a;return r},async getTasks(){let{data:{user:e}}=await s.O.auth.getUser();if(!e)throw Error("User not authenticated");let{data:t,error:r}=await s.O.from("tasks").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(r)throw r;return t},async updateTask(e,t){let{data:{user:r}}=await s.O.auth.getUser();if(!r)throw Error("User not authenticated");let{data:a,error:i}=await s.O.from("tasks").update(t).eq("id",e).eq("user_id",r.id).select().single();if(i)throw i;return a},async deleteTask(e){let{data:{user:t}}=await s.O.auth.getUser();if(!t)throw Error("User not authenticated");let{error:r}=await s.O.from("tasks").delete().eq("id",e).eq("user_id",t.id);if(r)throw r;return!0},async toggleTaskComplete(e,t){return this.updateTask(e,{completed:t})},async getTasksByCategory(e){let{data:{user:t}}=await s.O.auth.getUser();if(!t)throw Error("User not authenticated");let{data:r,error:a}=await s.O.from("tasks").select("*").eq("category",e).eq("user_id",t.id).order("created_at",{ascending:!1});if(a)throw a;return r},async getTasksByDateRange(e,t){let{data:{user:r}}=await s.O.auth.getUser();if(!r)throw Error("User not authenticated");let{data:a,error:i}=await s.O.from("tasks").select("*").eq("user_id",r.id).gte("due_date",e).lte("due_date",t).order("due_date",{ascending:!0});if(i)throw i;return a}};function n(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[n,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{l()},[]);let l=async()=>{try{let e=await i.getTasks();t(e),d(null)}catch(e){d(e instanceof Error?e.message:"Failed to fetch tasks")}finally{s(!1)}},o=async r=>{try{let a=await i.createTask(r);return t([a,...e]),a}catch(e){return d(e instanceof Error?e.message:"Failed to add task"),null}},c=async(r,a)=>{try{let s=await i.updateTask(r,a);return t(e.map(e=>e.id===r?s:e)),s}catch(e){return d(e instanceof Error?e.message:"Failed to update task"),null}},u=async r=>{try{return await i.deleteTask(r),t(e.filter(e=>e.id!==r)),!0}catch(e){return d(e instanceof Error?e.message:"Failed to delete task"),!1}},g=async t=>{let r=e.find(e=>e.id===t);return r?c(t,{completed:!r.completed}):null};return{tasks:e,loading:r,error:n,addTask:o,updateTask:c,deleteTask:u,toggleTaskComplete:g,refreshTasks:l}}},4599:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var a=r(663);let s="https://tffnlgnvmhzxidalqwwv.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmZm5sZ252bWh6eGlkYWxxd3d2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4NjQzNDcsImV4cCI6MjA1OTQ0MDM0N30.NAZJrpufIbmRcCKa_TW95uOikJHzbNhBFH_cA1SwjD8";if(!s||!i)throw Error("Missing Supabase environment variables");let n=(0,a.AY)(s,i)}},function(e){e.O(0,[956,663,805,971,69,744],function(){return e(e.s=1379)}),_N_E=e.O()}]);